///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/*
 *	OPCODE - Optimized Collision Detection
 *	Copyright (C) 2001 Pierre Terdiman
 *	Homepage: http://www.codercorner.com/Opcode.htm
 */
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/**
 *	Contains code to perform "picking".
 *	\file		OPC_Picking.h
 *	\author		Pierre Terdiman
 *	\date		March, 20, 2001
 */
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Include Guard
#ifndef __OPC_PICKING_H__
#define __OPC_PICKING_H__

#ifdef OPC_RAYHIT_CALLBACK

#include <vector>
#include "Ice/IcePoint.h"

enum CullMode
{
	CULLMODE_NONE = 0,
	CULLMODE_CW = 1,
	CULLMODE_CCW = 2
};

typedef CullMode (*CullModeCallback)(uint32_t triangle_index, void *user_data);

bool SetupAllHits(RayCollider &collider, std::vector<CollisionFace> &contacts);
bool SetupClosestHit(RayCollider &collider, std::vector<CollisionFace> &closest_contact);
bool SetupShadowFeeler(RayCollider &collider);
bool SetupInOutTest(RayCollider &collider);

bool Picking(
	CollisionFace &picked_face,
	const Ray &world_ray, const Model &model, const Matrix4x4 *world,
	float min_dist, float max_dist, const Point &view_point, CullModeCallback callback, void *user_data);
#endif

#endif //__OPC_PICKING_H__
